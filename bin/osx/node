#!/bin/bash
export HAM_NO_VER_CHECK=1
if [[ -z "$HAM_HOME" ]]; then echo "E/HAM_HOME not set !"; exit 1; fi

BREW_LOCAL_DIR="/usr/local"
if [ ! -d "$BREW_LOCAL_DIR/bin" ]; then
    BREW_LOCAL_DIR="/opt/homebrew"
fi
# echo "I/BREW_LOCAL_DIR: $BREW_LOCAL_DIR"

if [[ ! -e "$BREW_LOCAL_DIR/bin/node" ]]; then
    . ham-toolset nodejs
fi
if [ -z "$NODEJS_GLOBAL_MODULES_DIR" ]; then
    export NODEJS_GLOBAL_MODULES_DIR="$BREW_LOCAL_DIR/node_modules/"
fi
if [ -z "$NODE_PATH" ]; then
    export NODE_PATH=$NODEJS_GLOBAL_MODULES_DIR:`pwd`/node_modules/
fi
"$BREW_LOCAL_DIR/bin/node" "$@"
