#!/bin/bash
. ham-bash-lib.sh

if [ "$1" = "force" ]; then
    shift
    echo "I/Forcing the installation of the required node modules."
elif [ -z "$(where_inpath eslint)" -o \
       -z "$(where_inpath gulp)" -o \
       -z "$(where_inpath jsonlint)" -o \
       -z "$(where_inpath node-pre-gyp)" -o \
       -z "$(where_inpath heroku)" -o \
       -z "$(where_inpath esbuild)" -o \
       -z "$(where_inpath yarn)" ]; then
    echo "I/Not all required packages are installed"
else
    echo "I/All required global packages are installed."
    exit 0
fi

echo "I/Installing packages with scripts..."
npm install -g \
    eslint@5.x \
    gulp@3.x \
    jsonlint@1.6.x \
    node-pre-gyp \
    heroku \
    esbuild \
    yarn

echo "I/Installing regular packages..."
npm install -g --no-bin-links \
    css-loader@0.15.x \
    eslint-plugin-react@7.x \
    eslint-plugin-promise@4.2.1 \
    extract-text-webpack-plugin@0.8.x \
    file-loader@0.8.x \
    jsx-loader@0.13.x \
    less-loader@2.2.x \
    less@2.5.x \
    mocha@2.2.x \
    nodemon@1.3.7 \ \
    react-hot-loader@1.2.x \
    react-script-loader@0.0.1 \
    react-tools@0.13.x \
    script-loader@0.6.x \
    style-loader@0.12.x \
    supertest@1.x \
    url-loader@0.5.x \
    webpack-dev-server@1.x \
    webpack@1.x
